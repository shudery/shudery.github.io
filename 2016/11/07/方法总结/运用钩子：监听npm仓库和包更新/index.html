<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Daguo">
  <!-- Open Graph Data -->
  <meta property="og:title" content="运用钩子：监听npm仓库和包更新"/>
  <meta property="og:description" content="Personal blog which build by hexo from shudery/daguo" />
  <meta property="og:site_name" content="Daguo&#39;s blog"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://shudery.cnundefined"/>
  <!-- for baidu web-auto-transform -->
  <meta http-equiv="Cache-Control" content="no-transform" />

  
    <link rel="alternate" href="/atom.xml" title="Daguo&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  

  <!-- Site Title -->
  <title>运用钩子：监听npm仓库和包更新 — Daguo&#39;s blog</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

  <div id='wx_pic' style='margin:0 auto;display:none;'>
  <img src="/img/pic300.jpg" />
  </div>
  <!-- baidu analytics -->
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?043bb3ce93c8a91e76a6623da10e9778";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script>
</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">运用钩子：监听npm仓库和包更新</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  HOME
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  ARCHIVES
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/shudery">
                  
                  GITHUB
                  
                </a>
              </li>
            
              <li>
                <a href="/2016/03/01/%E9%9A%8F%E7%AC%94/%E5%85%B3%E4%BA%8E%E6%88%91/">
                  
                  ABOUT
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
  
      <script>
    document.getElementsByClassName('header-background')[0].style = 'background-image: url(/img/'+Math.ceil(Math.random()*5)+'.jpeg)';
  </script>

<!-- 添加网易云音乐插件脚本 -->
  
</header>


<article>

  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Daguo</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2016-11-07</span>
            <!-- <span class="time">21:35:00</span> -->
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/方法总结/">方法总结</a>
</span>
          
        </div>

        <!-- Tags 
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/翻译/">#翻译</a> <a class="tag" href="/tags/工具/">#工具</a>


          </div>
        
        -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p><strong>本文由我翻译在<a href="http://www.zcfy.cc/claim">众成</a>翻译平台，<a href="http://www.zcfy.cc/article/introducing-hooks-get-notifications-of-npm-registry-and-package-changes-as-they-happen-1610.html">文章地址</a></strong></p>
<p>今天我很高兴地给大家介绍一种简单强大的方法，可以用于追踪npm仓库变更，构建自己的开发环境的工具：钩子。</p>
<a id="more"></a>
<h2 id="What"><a href="#What" class="headerlink" title="What?"></a>What?</h2><p>钩子是你订阅的npm仓库事件的通知者，运用钩子，你能构建可以响应npm仓库中软件包更改的处理各种任务的集成环境。</p>
<p>每一次软件包变化，钩子会发送一个HTTP的POST请求给一个你在钩子中配置的URI地址，你可以添加钩子来监听特别的软件包，监听包发布者的动态，或者监听一个组织里的所有软件包和用户。</p>
<p>举个栗子，你可以通过给<strong>@npm</strong>设置一个钩子，监视npm所有上传的软件包，如果你只想监视lodash这个包，同样可以给<strong>@lodash</strong>设置钩子。</p>
<h2 id="When"><a href="#When" class="headerlink" title="When?"></a>When?</h2><p>如果你有一个paid，<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fwww.npmjs.com%2Fnpm%2Fprivate-packages&amp;t=MGY4N2Q4OWRmYTljZDg2YzViMzQzZGY5YmE4ZWJiOGI3MDg2M2QwOSxycTRWMHI1eA%3D%3D">个人或者组织的npm账号</a>，那么你可以马上运用钩子。</p>
<p>每一个用户可以配置总共100个钩子，至于要如何使用它们，这就取决你了：你可以将它们都用于监听同一个软件包，或者监听100个不同的包。如果你用一个钩子监听某一个范围，那么算作一个单一的钩子，不论这个范围内有多少个软件包。你可以监视npm代码库中任何开源的软件包，以及任何你可以控制的私人包，你只能收到有权限访问的软件包的钩子通知。</p>
<h2 id="How"><a href="#How" class="headerlink" title="How?"></a>How?</h2><p><img src="http://p0.qhimg.com/t01252b2385f2f7beb8.png" alt="!full Slack integration"></p>
<p>现在用<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fwww.npmjs.com%2Fpackages%2Fwombat&amp;t=Y2JjNDUwNzc2ZWZiY2Q3NDMxZjVhM2ZmZTM2NGE3ZTU0Njc0MmEyMSxycTRWMHI1eA%3D%3D">wombat</a>命令行工具创建你的第一个钩子。</p>
<p>首先，用通用的方法下载wombat</p>
<p><code>npm install -g wombat</code></p>
<p>然后开始设置一些钩子。</p>
<p><strong>1. 监听npm的软件包：</strong></p>
<p><code>wombat hook add npm</code></p>
<p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fexample.com%2Fwebhooks&amp;t=ZDA5NzVhODQ0MjQ0ZmI2MzhmOGMzZjYwZTljZGEzYTBkMjIwZmU3YSxycTRWMHI1eA%3D%3D">https://example.com/webhooks</a> shared-secret-text</p>
<p><strong>2. 监听@slack组织客户API的更新：</strong></p>
<p><code>wombat hook add @slack</code></p>
<p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fexample.com%2Fwebhooks&amp;t=ZDA5NzVhODQ0MjQ0ZmI2MzhmOGMzZjYwZTljZGEzYTBkMjIwZmU3YSxycTRWMHI1eA%3D%3D">https://example.com/webhooks</a> but-sadly-not-very-secret</p>
<p><strong>3. 监听ever-prolific substack:</strong> </p>
<p><code>wombat hook add --type=owner substack</code></p>
<p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fexample.com%2Fwebhooks&amp;t=ZDA5NzVhODQ0MjQ0ZmI2MzhmOGMzZjYwZTljZGEzYTBkMjIwZmU3YSxycTRWMHI1eA%3D%3D">https://example.com/webhooks</a> this-secret-is-very-shared</p>
<p><strong>4. 查看你的所有钩子以及它们上一次触发的时间:</strong></p>
<p><code>wombat hook ls</code></p>
<p> 提示：Wombat还有几个有趣的用法。<code>wombat --help</code>会告诉你还有哪些用法。</p>
<p>我们也提供了公共的API来运行钩子，更多的细节以及如何运用API而不用wombat来管理你的钩子可以参考<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnpm%2Fregistry%2Ftree%2Fmaster%2Fdocs%2Fhooks&amp;t=MDE2Y2IzMjJjMGVlOGVkMGY0ZDAwZDhhMzhjMTVmNjJjZGNiOWI4MCxycTRWMHI1eA%3D%3D">文档</a>.</p>
<h2 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h2><p>你能运用钩子来触发集成测试，触发代码部署，在聊天频道发布通知或者触发你自己软件包的更新</p>
<p>为了帮助你更好地上手，提供给你一些我们在开发钩子的时候整理的资料。</p>
<ul>
<li><p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnpm-hook-receiver&amp;t=OGRjZGI4YmEyYzQ0NDY0YzZjOTdiMzEzOGY5ZTE2MzM2ODViZThkOSxycTRWMHI1eA%3D%3D">npm-hook-receiver</a>: 一个用钩子监听HTTP的post请求的<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Frestify&amp;t=OTI5YzEwOGFhNGE2NjhkYzg0ZWNjMzY5OTI5N2Y3YjM0YmNiZjc2YSxycTRWMHI1eA%3D%3D">例子</a>，<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnpm%2Fnpm-hook-receiver&amp;t=Yjk3ZWI1OWE5YTg5ZmQ2NWM4Yzk4N2YwOGYwYjVlYTM1ZWE0NjZiNCxycTRWMHI1eA%3D%3D">源码点这里</a>.</p>
</li>
<li><p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnpm%2Fnpm-hook-slack&amp;t=MGY1NTdjMjUwZjZkODJlZGI1YTFiNDJhNWI5YzNkZDcyOTc5NWI5YSxycTRWMHI1eA%3D%3D">npm-hook-slack</a>: 世界上最简单的播报Slack包事件的Slackbot，用npm-hook-receiver构建.</p>
</li>
<li><p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnpm%2Fcaptain-hook&amp;t=ZDc3ZDU2MDZjMjRlNjRkMGIyYmMyZDA2OTFkNjA3NGFhY2JmMmRiOSxycTRWMHI1eA%3D%3D">captain-hook</a>: 一个有趣的工具帮你管理你的web钩子以及接收posts.</p>
</li>
<li><p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fwombat&amp;t=NDBiZDBlZDM0OGY0OGYwOGFlNGU5YzdjYWJkNTUxNzgzMWZiOTU1OSxycTRWMHI1eA%3D%3D">wombat</a>: 一个CLI命令行工具，用于检查和编辑你的钩子，这个客户端运用所有的钩子API，<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnpm%2Fwombat-cli&amp;t=YzQxZTJiYWVkYTBhYmIyYmQzMTc4M2Y2ZTVmMjc3ZGMxOWRiNDY5MyxycTRWMHI1eA%3D%3D">源码点这里</a>.</p>
</li>
<li><p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnpm%2Fifttt-hook-translator&amp;t=NjliNTU2YjkyZDVkNDEyOWMwZGFkODMxNGE5MzU5OWMzODVjMGQ4NSxycTRWMHI1eA%3D%3D">ifttt-hook-translator</a>: 一个可以接收web钩子已经将其转化为<a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fifttt.com%2F&amp;t=ZWI1MzhmMzYxOGVlNTExNjYwYWY1ZWNlMWNhZDdiOTQ5ZmU5ZjBlMixycTRWMHI1eA%3D%3D">IFTTT</a>事件的工具, 可以用它触发任何你能在IFTTT做的事情</p>
</li>
<li><p><a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fbcoe%2Fcitgm-harness%2Fpulls&amp;t=Mzk1MDA1MDUxNGE3NDAyMTljNzYxYTgyMDkxNWQ0Y2RhZTA4YmZhZixycTRWMHI1eA%3D%3D">citgm-harness</a>: <a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fgithub.com%2Fnodejs%2Fcitgm&amp;t=ZTJkM2YzMzZmYzk5MWI3N2YyZTA0ZDRmZGE2N2ZmY2QyYmViMjJkMixycTRWMHI1eA%3D%3D">Canary in the Gold Mine suite</a> 一个Nodejs运用钩子来驱动包测试的工具，详细的包信息触发不同项目持续的集成测试，是一个测试是否破坏由顶自下依赖条件的方法</p>
</li>
</ul>
<h2 id="What-do-you-think"><a href="#What-do-you-think" class="headerlink" title="What do you think?"></a>What do you think?</h2><p>我们公布的是钩子的Beta版本，从哪里获得它就行。我们如何看待它？你们还有其他想要的监听的事件？100个钩子的提供太多还是太少？</p>
<p>我们对你的看法真的非常感兴趣，如果你构建了一些有用的或者用处不大的钩子工具，不要害羞与我们<a href="http://t.umblr.com/redirect?z=http%3A%2F%2Finfo%40npmjs.com&amp;t=MGIzMWQ2MGMxZGVhODlkYTFkYmExNGFmZmYyNDQzNTBjZjg3YzQzZSxycTRWMHI1eA%3D%3D">交流</a>或者在<a href="https://twitter.com/npmjs">推特</a>上面@我们。</p>

        </div>
          
            <div class="ds-thread" data-thread-key="方法总结/运用钩子：监听npm仓库和包更新" data-title="运用钩子：监听npm仓库和包更新" data-url="http://shudery.cn/2016/11/07/方法总结/运用钩子：监听npm仓库和包更新/"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"shudery"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    // ds.src = 'http://localhost:4000/js/duoshuo.js';
    var st = document.createElement('style');
  	// st.rel = "stylesheet";
  	// st.href = "http://localhost:4000/css/duoshuo.css";	
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds).appendChild(st);
  })();
  	</script>
        
  
      </div>
    </div>
  </div>


</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
            <a href="mailto:shudery@foxmail.com">shudery</a>&nbsp;@2015-2017&nbsp;&nbsp;|&nbsp;&nbsp; 
           <a href="#"></a>
          
            Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>

      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

